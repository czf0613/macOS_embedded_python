# 如何自己构建一个嵌入式python?
这个教程通用任何CPU架构的macOS，只要系统自带的python版本不要太老就行，毕竟构建的程序是拿python写的，这个跑不起来就无解了。

## 准备工作
需要提前准备好一个拿来做范本的python环境，我们以homebrew为范本会比较好。

### 1，安装homebrew
这个我懒得废话了……

### 2，安装你想要的python版本以及对应的tkinter
例如`brew install python@3.13 python-tk@3.13`
当然如果你不想要tkinter依赖的话，就需要在我们提供的脚本的基础上自行做一下精简。只要修改一下`main.py`中的`process_stdlib`函数的最后那段就可以了，并不算太复杂。
想要精简掉别的原生库依赖也是可以的，道理类似。

## 开始构建
直接执行`./build.sh`即可。

开始构建后，脚本会自动删除父目录的`lib`、`dylib`、`python`这三个文件（夹）。
然后根据脚本的提示，输入完整的homebrew python版本号即可（例如3.13.3）。版本号必须完整，由三部分组成。

## 测试
python的标准库是不用担心的，因为那些都是py的源代码文件，只要路径对了肯定是没毛病的。反而是原生库比较需要测试一下。

可以在macOS下，直接双击`test`文件夹下的`test.command`文件，会自动进行功能测试。注意，tkinter的需要关掉对应窗口之后，才会继续下一项测试。

原生库里面比较重要的就是`tkinter`、`asyncio`、`ssl`、`sqlite3`这三个。所以在`tests/`文件夹下，我们准备了跟这几个相关的测试代码。代码逻辑其实不太需要测试，因为只要正常import了，大概率后续是不会有问题的，所以测试代码就很简陋，基本上只测试了基础的import就算完事了。